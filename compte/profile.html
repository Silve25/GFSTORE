<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mon profil â€” GF Store</title>
  <meta name="description" content="GÃ©rez vos informations personnelles GF Store : nom, email, tÃ©lÃ©phone, adresse et pays.">
  <style>
    :root{
      --w:1200px; --c:#0f172a; --a:#2563eb; --bg:#f5f7fb;
      --r:16px;
    }
    *{box-sizing:border-box}
    body{margin:0;font:14px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu;color:var(--c);background:var(--bg)}
    a{color:inherit}

    /* Header */
    header{position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid #e5e7eb;backdrop-filter:saturate(140%) blur(4px)}
    .hwrap{max-width:var(--w);margin:auto;padding:10px 12px;display:flex;justify-content:space-between;align-items:center;gap:10px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700;text-decoration:none}
    .brand .logo{height:40px;width:auto;display:block}
    .nav{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .nav a,.iconbtn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid #e5e7eb;background:#fff;border-radius:12px;text-decoration:none;box-shadow:0 1px 0 rgba(0,0,0,.02)}
    .nav a:hover,.iconbtn:hover{box-shadow:0 2px 10px rgba(0,0,0,.06)}
    .iconbtn{cursor:pointer}
    .ic{width:16px;height:16px;display:inline-block}
    .dropdown{position:relative}
    .menu{position:absolute;right:0;top:calc(100% + 8px);background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:6px;min-width:220px;box-shadow:0 10px 24px rgba(0,0,0,.12);display:none;z-index:60}
    .menu.show{display:block}
    .menu a{display:block;padding:8px 10px;border-radius:8px;text-decoration:none}
    .menu a:hover{background:#f3f4f6}

    /* Bandeau */
    .banner{background:linear-gradient(90deg,#1e3a8a,#2563eb,#0ea5e9);color:#fff;text-align:center;padding:10px 14px}
    .banner .timer{font-weight:700;border-radius:999px;padding:2px 8px;background:rgba(255,255,255,.15);display:inline-block}
    .banner .sep{opacity:.6;padding:0 6px}

    /* Layout */
    .wrap{max-width:860px;margin:18px auto 40px;padding:0 12px;display:grid;gap:14px}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:16px;padding:16px;box-shadow:0 1px 0 rgba(0,0,0,.02)}
    .hdr{display:flex;gap:12px;align-items:center;margin-bottom:10px}
    .avatar{width:56px;height:56px;border-radius:999px;display:grid;place-items:center;font-weight:800;background:#eff6ff;border:1px solid #dbeafe;color:#1d4ed8}
    h1{font-size:18px;margin:0}
    h2{font-size:15px;margin:14px 0 8px}
    .muted{opacity:.75;font-size:12px}

    form{display:grid;gap:12px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:720px){ .grid2{grid-template-columns:1fr} }
    label{display:block;font-weight:600;margin:4px 0}
    input,select{width:100%;padding:12px;border:1px solid #e5e7eb;border-radius:12px;background:#fff}
    input[readonly]{background:#f9fafb;color:#64748b}

    .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:8px;justify-content:center;padding:12px 14px;border:1px solid #1e40af;background:linear-gradient(180deg,#2563eb,#1e40af);color:#fff;border-radius:12px;cursor:pointer;min-width:160px}
    .btn.secondary{background:#fff;border:1px solid #e5e7eb;color:#111}
    .btn:disabled{opacity:.6;cursor:not-allowed}

    .msg{margin-top:6px;padding:10px;border-radius:12px;display:none}
    #profileMsg{background:#fef2f2;border:1px solid #fee2e2;color:#991b1b} /* recolorisÃ© en succÃ¨s par showMsg() */

    .help{font-size:12px;opacity:.75}

    footer{background:#fff;border-top:1px solid #e5e7eb}
    .fwrap{max-width:var(--w);margin:0 auto;padding:16px 12px;display:flex;flex-wrap:wrap;gap:10px;justify-content:space-between;align-items:center;font-size:12px}
    .fwrap a{text-decoration:none;color:inherit;opacity:.9}
    .fwrap a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <div class="banner">ðŸ‘¤ GÃ©rez votre profil <span class="sep">â€¢</span> <span id="countdown" class="timer" aria-live="polite"></span></div>

  <header>
    <div class="hwrap">
      <a id="homeLink" class="brand" aria-label="Accueil">
        <img src="../assets/img/logopnggfstore.png" class="logo" alt="GF Store" width="180" height="52" decoding="async">
      </a>
      <nav class="nav" aria-label="Navigation">
        <a id="accountLink"><img class="ic" id="icAccount" alt=""> Mon compte</a>
        <button class="iconbtn" id="logoutBtn"><img class="ic" id="icLogout" alt=""> DÃ©connexion</button>
        <div class="dropdown">
          <button class="iconbtn" id="menuBtn" aria-label="Menu"><img class="ic" id="icMenu" alt=""></button>
          <div id="menuDrop" class="menu">
            <a id="aboutLink">Ã€ propos</a>
            <a id="cgvLink">CGV</a>
            <a id="legalLink">Mentions lÃ©gales</a>
            <a id="privacyLink">ConfidentialitÃ©</a>
            <a id="contactLink">Contact</a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="hdr">
        <div class="avatar" id="avatar">?</div>
        <div>
          <h1>Mon profil</h1>
          <div class="muted">Modifiez vos informations personnelles et dâ€™adresse de livraison.</div>
        </div>
      </div>

      <!-- Zone messages (utilisÃ©e par auth.js) -->
      <div id="profileMsg" class="msg" role="status" aria-live="polite"></div>

      <!-- IDs et names attendus par auth.js -->
      <form id="profileForm" novalidate>
        <h2>IdentitÃ©</h2>
        <div class="grid2">
          <div>
            <label for="name">Nom complet</label>
            <input id="name" name="name" type="text" placeholder="Jane Dupont" required>
          </div>
          <div>
            <label for="email">Email (lecture seule)</label>
            <input id="email" name="email" type="email" placeholder="vous@example.com" readonly>
          </div>
        </div>

        <div class="grid2">
          <div>
            <label for="phone">TÃ©lÃ©phone</label>
            <input id="phone" name="phone" type="tel" placeholder="+33 6 12 34 56 78" inputmode="tel">
          </div>
          <div>
            <label for="country">Pays</label>
            <input id="country" name="country" list="countries" placeholder="France">
            <datalist id="countries">
              <option value="France"></option>
              <option value="Belgique"></option>
              <option value="Suisse"></option>
              <option value="Luxembourg"></option>
              <option value="Espagne"></option>
              <option value="Italie"></option>
              <option value="Allemagne"></option>
              <option value="Pays-Bas"></option>
              <option value="Portugal"></option>
              <option value="Royaume-Uni"></option>
            </datalist>
          </div>
        </div>

        <h2 id="adresse">Adresse</h2>
        <div class="grid2">
          <div>
            <label for="address">Adresse</label>
            <input id="address" name="address" type="text" placeholder="10 Avenue de lâ€™Europe">
          </div>
          <div>
            <label for="city">Ville</label>
            <input id="city" name="city" type="text" placeholder="Paris">
          </div>
        </div>

        <div class="grid2">
          <div>
            <label for="zip">Code postal</label>
            <input id="zip" name="zip" type="text" placeholder="75008" inputmode="numeric">
          </div>
          <div class="help">Ces informations sont utilisÃ©es pour la livraison et la facturation.</div>
        </div>

        <div class="row" style="margin-top:6px">
          <a id="cancelBtn" class="btn secondary">Annuler</a>
          <button class="btn" type="submit"><img class="ic" id="icSave" alt=""> Enregistrer</button>
        </div>
      </form>
    </section>
  </main>

  <footer>
    <div class="fwrap">
      <div>Â© GF Store 2025 â€” SimplicitÃ©, sÃ©curitÃ©, crypto-friendly.</div>
      <nav>
        <a id="aboutLink2">Ã€ propos</a> Â·
        <a id="cgvLink2">CGV</a> Â·
        <a id="legalLink2">Mentions lÃ©gales</a> Â·
        <a id="privacyLink2">ConfidentialitÃ©</a> Â·
        <a id="contactLink2">Contact</a>
      </nav>
    </div>
  </footer>

  <!-- API / session logic -->
  <script src="js/auth.js" defer></script>

  <script>
  (function(){
    "use strict";
    const $=(s,root)=> (root||document).querySelector(s);

    // GH_ROOT (GitHub Pages friendly)
    const GH_ROOT = (()=>{ 
      const parts = location.pathname.split('/').filter(Boolean);
      return (location.host.endsWith('github.io') && parts.length) ? `/${parts[0]}/` : '/';
    })();

    // IcÃ´nes
    const ICONS = {
      account:'https://img.icons8.com/?size=100&id=60655&format=png&color=000000',
      menu:'https://img.icons8.com/?size=100&id=RzDomvpIKGI9&format=png&color=000000',
      logout:'https://img.icons8.com/?size=100&id=IKneRwT2PRjz&format=png&color=000000',
      save:'https://img.icons8.com/?size=100&id=63257&format=png&color=ffffff'
    };
    const setSrc=(id,src)=>{const el=document.getElementById(id); if(el) el.src=src};
    function setIcons(){
      setSrc('icAccount', ICONS.account);
      setSrc('icMenu', ICONS.menu);
      setSrc('icLogout', ICONS.logout);
      setSrc('icSave', ICONS.save);
    }

    // Liens
    function link(id,path){ const el=document.getElementById(id); if(el) el.href=GH_ROOT+path; }
    function wireLinks(){
      $('#homeLink').href = GH_ROOT;
      link('accountLink','compte/index.html');
      link('cancelBtn','compte/index.html');
      const pages = {about:'a-propos', cgv:'cgv', legal:'mentions-legales', privacy:'confidentialite', contact:'contact'};
      Object.entries(pages).forEach(([k,slug])=>{
        link(k+'Link','pages/'+slug+'.html');
        link(k+'Link2','pages/'+slug+'.html');
      });
    }

    // Menu
    function wireMenu(){
      const btn=$('#menuBtn'), drop=$('#menuDrop');
      if(!btn||!drop) return;
      btn.addEventListener('click',e=>{e.stopPropagation();drop.classList.toggle('show')});
      document.addEventListener('click',e=>{ if(!drop.contains(e.target) && e.target!==btn) drop.classList.remove('show'); });
    }

    // Bandeau compte Ã  rebours (48h)
    function wireCountdown(){
      const el=$('#countdown'); if(!el) return;
      const END=new Date(Date.now()+48*60*60*1000); const two=n=>String(n).padStart(2,'0');
      function tick(){
        const now=new Date(); let diff=END-now;
        if(diff<=0){ el.textContent='DerniÃ¨res heures !'; return; }
        const d=Math.floor(diff/86400000); diff%=86400000;
        const h=Math.floor(diff/3600000); diff%=3600000;
        const m=Math.floor(diff/60000); const s=Math.floor((diff%60000)/1000);
        el.textContent=`${d?d+'j ':''}${two(h)}:${two(m)}:${two(s)} restants`;
      }
      tick(); setInterval(tick,1000);
    }

    // Avatar initial
    function setAvatar(nameOrEmail){
      const a = document.getElementById('avatar');
      if(!a) return;
      const t = (nameOrEmail||'?').trim();
      a.textContent = (t[0] || '?').toUpperCase();
    }

    // Session & logout local (UX)
    function wireSession(){
      // Si pas de session, auth.js redirigera ; on anticipe
      try{
        const s = JSON.parse(localStorage.getItem('GF_SESSION')||'null');
        if(!s || !s.email){
          location.replace(GH_ROOT+'compte/login.html?next='+encodeURIComponent(location.href));
          return;
        }
        setAvatar(s.name || s.email);
      }catch{}
      const logoutBtn = document.getElementById('logoutBtn');
      if(logoutBtn){
        logoutBtn.addEventListener('click',(e)=>{
          e.preventDefault();
          localStorage.removeItem('GF_SESSION');
          location.replace(GH_ROOT+'compte/login.html');
        });
      }
    }

    function init(){
      wireLinks(); wireMenu(); wireCountdown(); setIcons(); wireSession();

      // DÃ©filement direct sur #adresse si prÃ©sent
      if(location.hash === '#adresse'){
        const el = document.getElementById('adresse');
        if(el) el.scrollIntoView({behavior:'smooth',block:'start'});
      }
    }
    document.addEventListener('DOMContentLoaded', init);
  })();
  </script>
</body>
</html>
